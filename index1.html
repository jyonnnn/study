<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Flashcards of Hjyeon</title>
  <style>
    :root{
      --bg:#ffffff;
      --card:#f2d7d3; /* khung chính màu hồng nhạt */
      --ink:#d84a3a;  /* chữ hồng đỏ */
      --muted:#a8736e;
      --accent:#d84a3a;
      --accent-weak:#fcebea;
      --border:#f8bfb9;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background:url('anhtrang01.png') no-repeat center center fixed;
      background-size:cover;
      color:var(--ink);
    }
    /* phủ mờ 70% ảnh nền để nổi khung chính */
    body::before{
      content:""; position:fixed; inset:0; background:rgba(255,255,255,0.7); z-index:-1;
    }

    header{position:sticky;top:0;background:rgba(255,255,255,0.6);backdrop-filter:saturate(180%) blur(6px);border-bottom:1px solid var(--border);z-index:10}
    .wrap{max-width:880px;margin:0 auto;padding:16px}
    h1{font-size:22px;margin:0 0 6px 0;color:var(--ink);}
    .sub{font-size:12px;color:var(--muted);}
    .panel{display:grid;grid-template-columns:1fr auto auto;gap:8px;align-items:center;margin-top:10px}
    .controls{display:flex;gap:6px;flex-wrap:wrap;align-items:center}
    input[type="text"]{padding:10px 12px;border:1px solid var(--border);border-radius:10px;outline:none;width:100%;background:#fff}
    input[type="text"]:focus{border-color:var(--accent)}
    button{border:1px solid var(--border);background:#fff;border-radius:12px;padding:10px 14px;cursor:pointer;color:var(--ink)}
    button.primary{background:var(--accent);border-color:transparent;color:#fff}
    button.ghost{background:var(--accent-weak);border-color:transparent;color:var(--ink)}
    button:disabled{opacity:.5;cursor:not-allowed}
    .pill{font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:#fff;color:var(--muted)}

    main{display:grid;justify-items:center;padding:20px}

    /* Card */
    .stage{width:min(600px,94vw);height:min(60vh,520px);min-height:360px;display:grid;place-items:center;margin:18px 0}
    .card{width:100%;height:100%;border-radius:20px;background:var(--card);box-shadow:0 14px 36px rgba(216,74,58,.18);cursor:pointer;perspective:1200px;position:relative;border:1px solid var(--border)}
    .card-inner{position:absolute;inset:0;border-radius:20px;transform-style:preserve-3d;transition:transform .6s}
    .card.flipped .card-inner{transform:rotateY(180deg)}
    .face{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:14px;padding:28px;border-radius:20px;backface-visibility:hidden}
    .front{background:linear-gradient(180deg,#f2d7d3, #f9e5e2)}
    .front h2{font-size:40px;line-height:1.1;margin:0;text-align:center;color:var(--ink)}
    .badge{font-size:12px;color:var(--ink);background:var(--accent-weak);padding:6px 10px;border-radius:999px;border:1px dashed var(--border)}
    .back{transform:rotateY(180deg);background:var(--card)}
    .meaning{font-size:20px;line-height:1.45;text-align:center;color:var(--ink)}
    .muted{color:var(--muted)}

    /* Footer controls */
    .nav{display:flex;gap:10px;align-items:center;justify-content:center}
    .counter{font-size:14px;color:var(--muted)}

    /* Add/Edit form */
    details.box{width:min(600px,94vw);background:#fff;border:1px solid var(--border);border-radius:16px;padding:12px 12px 16px;box-shadow:0 10px 24px rgba(2,6,23,.05)}
    details.box>summary{cursor:pointer;list-style:none;padding:6px 2px;font-weight:600;color:var(--ink)}
    details.box[open]>summary{margin-bottom:8px}
    .grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px}
    .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    label{font-size:12px;color:var(--muted)}
    .hint{font-size:12px;color:var(--muted)}
    .tiny{font-size:12px}
    .switch{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:#fff;color:var(--ink)}
    .foot{display:flex;gap:8px;align-items:center;justify-content:space-between;margin-top:8px}

    @media (max-width:760px){
      .grid{grid-template-columns:1fr}
      .panel{grid-template-columns:1fr;gap:6px}
    }
  </style>
</head>
<body>
<header>
  <details class="wrap-toggle">
    <summary><span class="chev">▸</span> Flashcards of Hjyeon — công cụ</summary>

    <div class="wrap-inner">
      <h1>Flashcards of Hjyeon</h1>
      <div class="sub">Nhấp vào thẻ để lật • Space: lật | ←/→: chuyển thẻ | Enter: tìm kiếm</div>

      <div class="panel">
        <input id="search" type="text" placeholder="Tìm từ (EN/KO/VI)…" />
        <div class="controls">
          <label class="switch"><input id="toggle-ko" type="checkbox" checked> <span>Hiện tiếng Hàn</span></label>
          <label class="switch"><input id="toggle-vi" type="checkbox" checked> <span>Hiện tiếng Việt</span></label>
          <button id="shuffle" class="ghost" title="Xáo trộn">🔀 Xáo</button>
        </div>
        <div class="controls">
          <button id="btn-export" title="Xuất JSON">⬇️ Xuất</button>
          <label class="switch" title="Nhập JSON"><input id="file" type="file" accept="application/json"> <span>⬆️ Nhập</span></label>
        </div>
      </div>
    </div>
  </details>
</header>


  <main>
    <div class="stage">
      <div id="card" class="card" aria-live="polite" role="button" tabindex="0">
        <div class="card-inner">
          <div class="face front">
            <span class="badge">EN</span>
            <h2 id="front-word">loading…</h2>
            <div class="hint">Nhấp để xem nghĩa</div>
          </div>
          <div class="face back">
            <div class="badge">KO • VI</div>
            <div class="meaning" id="back-meaning"></div>
            <div class="hint muted">Nhấp để quay lại</div>
          </div>
        </div>
      </div>
    </div>

    <div class="nav">
      <button id="prev">◀︎ Trước</button>
      <button id="flip" class="primary">Lật thẻ</button>
      <button id="next">Sau ▶︎</button>
      <span class="counter" id="counter">0 / 0</span>
      <button id="edit" title="Sửa thẻ hiện tại">✏️ Sửa</button>
      <button id="del" title="Xoá thẻ hiện tại" style="color:#b91c1c;border-color:#fecaca;background:#fff0f0">🗑️ Xoá</button>
    </div>

    <details class="box">
      <summary>＋ Thêm từ mới</summary>
      <div class="grid">
        <div>
          <label>English</label>
          <input id="in-en" type="text" placeholder="vd. innovative" />
        </div>
        <div>
          <label>한국어 뜻</label>
          <input id="in-ko" type="text" placeholder="vd. 혁신적인" />
        </div>
        <div>
          <label>Tiếng Việt</label>
          <input id="in-vi" type="text" placeholder="vd. đổi mới, sáng tạo" />
        </div>
      </div>
      <div class="foot">
        <span class="tiny muted">Mẹo: thêm nhanh rồi Enter để lưu.</span>
        <div class="row">
          <button id="add" class="primary">Lưu từ</button>
          <button id="clear-all" title="Xoá toàn bộ bộ thẻ" style="border-color:#fecaca">🧹 Xoá tất cả</button>
        </div>
      </div>
    </details>

    <p class="tiny muted" style="margin-top:14px">장희연 세상에 제일 이뻥~ 화이팅.</p>
  </main>

  <script>
  (function(){
    const LS_KEY = 'flatcards_v1';
    const $ = (sel)=>document.querySelector(sel);

    const sample = [

  {en:'CISG', ko:'CISG', vi:'국제물품매매계약에 관한 UN협약으로, 국제상거래 시 계약의 성립 및 당사자의 의무 및 구제 등에 관한 규정을 다루고 있으며 국제무역거래의 통일법으로서의 역할을 한다.'},
  {en:'intermediate trade', ko:'중계무역', vi:'중계업자가 수출할 것을 목적으로 물품을 수입한 후 가공이나 변형 없이 다시 제3국으로 수출하는 무역으로, 중계업자는 수출입의 주체로서 이에 따른 매매차익을 얻는다.'},
  {en:'merchandising trade', ko:'중개무역', vi:'수출국과 수입국의 중간에서 제3자인 중개업자가 개입하여 이루어지는 무역으로, 물품은 통상 제3국을 경유하지 않고 수출국에서 수입국으로 직송되며 중개업자는 무역거래 과정에서 중개수수료를 취득한다.'},
  {en:'switch trade', ko:'스위치무역', vi:'매매계약과 물품의 수출입은 수출자와 수입자 간에 직접적으로 이루어지나 대금결제는 제3국에서 이루어지는 무역으로, 제3국의 상인(스위처)은 스위치에 따른 전매 수수료를 취득한다.'},
  {en:'transit trade', ko:'통과무역', vi:'수출품이 수입국으로 직송되지 않고 제3국을 경유하여 이루어지는 무역으로, 지리적인 이유로 인하여 이용되며 제3국은 자국 내 통과에 따른 정박료, 보관료, 노무에 관한 보수 등을 취득한다.'},

  {en:'offer', ko:'청약', vi:'매도인이 매수인에게 일정한 내용의 계약을 성립시킬 목적으로 행하는 일방적·확정적인 의사표시이다.'},
  {en:'shipped quality terms', ko:'선적지품질조건', vi:'선적시점을 품질결정시기로 하는 조건으로, 선적지품질조건 하에서 매도인은 운송 중 변질된 물품에 대해서 책임이 없다.'},
  {en:'landed quality terms', ko:'양륙지품질조건', vi:'도착지의 양륙시점을 품질결정시기로 하는 조건으로, 양륙지품질조건 하에서 매도인은 운송 중 변질된 물품에 대해서 책임이 있다.'},
  {en:'TQ (Tale Quale)', ko:'TQ', vi:'매도인이 곡물류 등 물품의 품질을 선적시점까지만 책임을 지는 조건으로, 선적지품질조건에 해당한다.'},
  {en:'RT (Rye Terms)', ko:'RT', vi:'호밀, 광산물 등의 거래에 활용되며 매도인이 양륙시점의 손상에 대해 책임을 지는 조건으로, 양륙지품질조건에 해당한다.'},
  {en:'SD (Sea Damaged)', ko:'SD', vi:'운송 중 곡물류 등 화물이 조류 또는 응고됨으로써 발생하는 손해를 매도인이 부담하는 조건으로, 선적지품질조건과 양륙지품질조건을 절충한 조건에 해당한다.'},
  {en:'Incoterms', ko:'인코텀즈', vi:'국내 및 국제무역거래조건의 사용에 관한 국제상업회의소 규칙으로서 물품인도, 위험이전, 비용부담 등 당사자의 의무에 대해 정형거래 조건별로 상세히 규정하고 있다. Incoterms 2020은 11개 규칙으로 구성되어 있으며, 단일 또는 복수의 운송방식을 불문하고 사용가능한 EXW, FCA, CPT, CIP, DAP, DPU, DDP 조건 등과 해상운송과 내수로운송에만 사용되어야 하는 FAS, FOB, CFR, CIF 등이 있다.'},
  {en:'EXW (Ex Works)', ko:'공장인도조건', vi:'매도인이 물품을 공장이나 창고와 같은 지정장소에서 물품을 매수인의 처분 하에 두는 때에 인도한 것으로 보는 조건으로, 매도인은 물품이 매수인의 처분 하에 놓일 때까지의 모든 위험과 비용을 부담한다. (매도인의 최소 의무조건)'},
  {en:'FCA (Free Carrier)', ko:'운송인인도조건', vi:'매도인이 물품을 그의 영업소 또는 기타 지정장소에서 매수인이 지정한 운송인이나 제3자에게 인도하는 조건이다. 매도인은 물품이 지정운송인에게 인도되는 때까지의 모든 위험과 비용을 부담하며, EXW 조건에 추가로 인도 장소까지의 운송비용과 수출통관비용을 부담한다.'},
  {en:'FAS (Free Alongside Ship)', ko:'선측인도조건', vi:'물품이 지정선적항에서 매수인에 의하여 지정된 본선의 선측에 놓이는 때에 매도인이 인도한 것으로 보는 조건으로, 매도인은 물품이 본선의 선측에 놓이는 때까지의 모든 위험과 비용을 부담한다.'},
  {en:'FOB (Free On Board)', ko:'본선인도조건', vi:'매도인이 물품을 지정선적항에서 매수인에 의하여 지정된 본선에 적재하여 인도하거나 이미 그렇게 인도된 물품을 조달하는 조건으로, 매도인은 물품이 본선에 적재될 때까지의 모든 위험과 비용을 부담한다.'},
  {en:'CPT (Carriage Paid To)', ko:'운송비지급인도조건', vi:'매도인이 합의된 장소에서 물품을 자신이 지정한 운송인이나 제3자에게 인도하는 조건이다. 매도인은 물품이 지정운송인에게 인도되는 때까지의 위험을 부담하며, 비용은 FCA 조건에 추가로 지정목적지까지의 운송비를 부담한다.'},
  {en:'CIP (Carriage and Insurance Paid to)', ko:'운송비·보험료지급인도조건', vi:'매도인이 합의된 장소에서 물품을 자신이 지정한 운송인이나 제3자에게 인도하는 조건이다. 매도인은 물품이 지정운송인에게 인도되는 때까지의 위험을 부담하며, 비용은 CPT 조건에 추가로 지정목적지까지의 보험료를 부담한다.'},
  {en:'CFR (Cost and Freight)', ko:'운임포함인도조건', vi:'매도인이 물품을 본선에 적재하여 인도하거나 이미 그렇게 인도된 물품을 조달하는 조건이다. 매도인은 물품이 본선에 적재될 때까지의 위험을 부담하며, 비용은 FOB 조건에 추가로 지정목적항까지의 운임을 부담한다.'},
  {en:'CIF (Cost, Insurance and Freight)', ko:'운임·보험료포함인도조건', vi:'매도인이 물품을 본선에 적재하여 인도하거나 이미 그렇게 인도된 물품을 조달하는 조건이다. 매도인은 물품이 본선에 적재될 때까지의 위험을 부담하며, 비용은 CFR 조건에 추가로 지정목적항까지의 보험료를 부담한다.'},
  {en:'DAP (Delivered At Place)', ko:'도착지인도조건', vi:'물품이 지정목적지에서 도착운송수단에 실린 채 양하준비된 상태로 매수인의 처분 하에 놓이는 때에 매도인이 인도한 것으로 보는 조건으로, 매도인은 양하되지 않은 물품이 매수인의 처분 하에 놓이는 때까지의 모든 위험과 비용을 부담한다.'},

  {en:'DPU (Delivered at Place Unloaded)', ko:'도착지양하인도조건', vi:'물품이 지정목적지 또는 지정목적지 내 합의된 지점에서 도착운송수단으로부터 양하된 상태로 매수인의 처분하에 놓인 때에 매도인이 인도한 것으로 보는 조건으로, 매도인은 물품을 지정목적지까지 가져가서 그곳에서 물품을 양하하는 데 수반되는 모든 위험을 부담한다.'},
  {en:'DDP (Delivered Duty Paid)', ko:'관세지급인도조건', vi:'물품이 지정목적지에서 도착운송수단에 실린 채 양하준비된 상태로 매수인의 처분 하에 놓이는 때에 매도인이 인도한 것으로 보는 조건이다. 매도인은 양하되지 않은 물품이 매수인의 처분 하에 놓이는 때까지의 모든 위험과 비용을 부담하며, DAP 조건에 추가로 수입관세 및 기타 세금을 부담한다. (매도인의 최대 의무조건)'},
  {en:'remittance base', ko:'송금결제', vi:'은행의 개입 없이 수입자가 수출자에게 직접 물품대금을 결제하는 방식이다.'},
  {en:'D/D (Demand Draft)', ko:'송금수표방식', vi:'수입자가 은행에 대금결제 후 받은 송금수표를 수출자에게 직접 송부하고, 수출국소재 은행에 이를 제시하여 대금을 회수하는 방식이다.'},
  {en:'M/T (Mail Transfer)', ko:'우편송금방식', vi:'수입자의 요청에 따라 송금은행이 지급은행 앞으로 일정한 금액을 지급해줄 것을 위탁하는 지급지시서를 발행하여 우편을 통해 보내는 방식이다.'},
  {en:'T/T (Telegraphic Transfer)', ko:'전신송금방식', vi:'우편송금방식과 같이 일정한 금액의 지급을 지급은행에 위탁하지만 우편 대신 전신을 통해 지시되며, 결제방식 중 수입자에게 가장 안전한 방식이다.'},
  {en:'COD (Cash On Delivery)', ko:'현물상환지급방식', vi:'수입자가 물품을 확인한 후 인도받으면서 대금을 결제하는 방식이며 금, 다이아몬드 등 거래에 사용된다.'},
  {en:'CAD (Cash Against Document)', ko:'서류상환지급방식', vi:'수출자가 물품을 선적한 후 수입자에게 선적서류를 인도함과 동시에 대금을 지급받는 방식이다.'},
  {en:'O/A (Open Account)', ko:'O/A방식(청산계정)', vi:'수출자가 물품을 선적한 후 서류를 송부하면 수입자는 일정 기간마다 약정된 기일에 대금을 결제하는 방식이다. 외상거래의 일종으로 결제방식 중 수수료가 가장 낮다.'},
  {en:'collection', ko:'추심', vi:'어음을 가진 사람이 은행에 어음의 대금 회수를 위임하고, 위임을 받은 은행은 어음의 발행자 앞으로 대금 지급을 요청하는 절차이다.'},
  {en:'remitting bank', ko:'추심의뢰은행', vi:'수출자(추심의뢰인)의 요청에 따라 수입지의 은행(추심은행)에 금융서류와 상업서류를 송부하여 추심을 의뢰하는 수출지의 은행이다.'},
  {en:'collection payment', ko:'추심결제', vi:'수출자가 물품 선적 후 추심의뢰은행을 통해 수입자(지급인)에게 대금을 청구하고 추심은행을 통해 수출대금을 회수하는 결제방식이다.'},
  {en:'collection instruction', ko:'추심지시서', vi:'추심의뢰은행이 추심의뢰인의 지시에 따라 추심조건을 나열한 서류이며 추심결제 당사자들에게 추심서류처리에 관한 기준을 제시한다.'},
  {en:'D/P (Documents Against Payment)', ko:'서류지급인도조건', vi:'수출자가 물품 선적 후 일람불환어음과 함께 선적서류를 제출하면, 수입자는 대금 지급과 동시에 선적서류를 인도받는 거래방식이다.'},
  {en:'D/A (Documents Against Acceptance)', ko:'서류인수인도조건', vi:'수출자가 발행한 기한부환어음을 수입자가 인수 서명하면, 선적서류를 인도해 주고 어음 만기일에 대금을 지급받는 방식이다.'},
  {en:'shipper', ko:'송하인', vi:'운송계약의 당사자로 물품을 보내는 자를 말하며 송화인이라고도 한다.'},
  {en:'consignee', ko:'수하인', vi:'운송계약의 당사자로 물품을 받는 자를 말하며 수화인이라고도 한다.'},
  {en:'L/C (Letter of Credit)', ko:'신용장', vi:'개설은행(수입자의 거래은행)이 수입자의 신용을 보증하기 위해 신용장에서 요구하는 조건에 맞는 서류가 제시되면 수출자에게 대금을 지급할 것을 확약하는 조건부 지급확약서이다.'},
  {en:'documentary L/C', ko:'화환신용장', vi:'수출자가 발행한 환어음에 신용장 조건과 일치하는 선적서류의 첨부를 조건으로 개설은행이 지급할 것을 확약하는 신용장이다.'},
  {en:'revocable L/C', ko:'취소가능신용장', vi:'개설은행이 신용장 개설 후 수출자에게 사전 통보 없이 언제든지 신용장 조건을 변경하거나 취소할 수 있는 신용장이다.'},

  {en:'irrevocable L/C', ko:'취소불능신용장', vi:'개설은행이 신용장 개설 후 일방적으로 신용장 조건을 변경하거나 취소할 수 없는 신용장이다.'},
  {en:'recourse', ko:'소구', vi:'매입은행이 수출자에게 대금을 지급하고 개설은행에게 받아야 하는데 개설은행이 지급불능이 되었을 경우, 매입은행이 자신에게 대금을 받아간 수출자에게 대금을 되돌려 달라고 요구하는 것이다.'},
  {en:'discounting of bills', ko:'어음 할인', vi:'어음의 수취인에게서 지불기일 전에 이자를 공제한 금액으로 어음을 매입하는 것을 말한다.'},
  {en:'negotiation L/C', ko:'매입신용장', vi:'서류와 환어음을 은행에 제시하면 은행이 어음을 할인하는 방식으로 매입하는 신용장으로, 소구가 가능하며 환어음을 요구한다.'},
  {en:'payment L/C', ko:'지급신용장', vi:'지급은행을 통해 신용장 대금을 받을 수 있도록 하는 신용장으로, 소구가 불가능하며 환어음을 요구하지 않는다.'},
  {en:'deferred payment L/C', ko:'연지급신용장', vi:'연기된 기한 후에 지급하는 신용장으로, 소구가 불가능하며 환어음을 요구하지 않는다.'},
  {en:'acceptance L/C', ko:'인수신용장', vi:'개설은행이 지정한 인수은행이 수익자가 발행한 기한부환어음을 인수하고 만기에 대금을 회수하는 형태의 신용장으로, 소구가 불가능하며 환어음을 요구한다.'},
  {en:'sight L/C', ko:'일람지급신용장', vi:'서류나 환어음을 제시했을 때 즉시 대금을 지급하는 신용장으로 지급신용장, 일람지급매입신용장 등이 해당한다.'},
  {en:'usance L/C', ko:'기한부신용장', vi:'서류나 환어음을 일단 인수하고 일정 기간 후에 대금을 지급하는 신용장으로 인수신용장, 연지급신용장, 기한부매입신용장이 해당한다.'},
  {en:'transferable L/C', ko:'양도가능신용장', vi:'수익자가 신용장 금액의 전부 또는 일부를 제3자에게 양도할 수 있는 신용장으로, “transferable”이라는 문언이 있어야만 양도가능신용장으로 본다.'},
  {en:'SWIFT L/C', ko:'SWIFT신용장', vi:'letter 방식 신용장에서 코드 형태로 전신화한 방식으로, 외국환은행의 국제 간 자금결제 업무를 수행하기 위해 조직한 국제은행 간 데이터통신시스템을 말한다.'},
  {en:'demand guarantee', ko:'청구보증', vi:'채무자의 보증요청을 받은 보증인이 채권자에게 지급을 보증하는 조건부 지급약속이다.'},
  {en:'international factoring', ko:'국제팩토링', vi:'수출자가 수입자에게 물품을 수출함에 따라 발생하는 외상매출채권을 팩토링회사에 양도하고, 팩토링회사는 지급보증과 매출채권 관리, 대금회수 등을 대행해 주는 금융기법이다.'},
  {en:'forfaiting', ko:'포페이팅', vi:'현금을 대가로 채권을 포기 또는 양도한다는 것으로, 포페이터(할인매입은행)가 환어음이나 약속어음을 소구 없이 고정이자율로 매입하는 금융기법이다.'},
  {en:'shipment', ko:'선적', vi:'운송수단에 화물을 싣는 작업이다.'},
  {en:'Landing', ko:'양하', vi:'운송수단으로부터 화물을 내리는 작업이다.'},
  {en:'chartering', ko:'용선', vi:'선주가 선박을 이용하려는 자에게 선박을 빌려주는 것을 말한다.'},
  {en:'voyage charter', ko:'항해용선계약', vi:'선적항에서 양륙항까지 화물의 운송을 의뢰하는 계약으로, 선주는 항해 준비가 된 선박을 제공하고 이에 대한 보수로 용선료를 받는다.'},
  {en:'time charter', ko:'정기용선계약', vi:'일정 기간을 정하여 선박을 용선하는 계약으로, 선주는 항해 준비가 된 선박을 일정 기간 용선자에게 사용하게 하고 이에 대한 보수로 용선료를 받는다.'},
  {en:'demise charter', ko:'나용선계약', vi:'용선자가 선주로부터 항해준비가 되어있지 않은 선박 자체만을 빌려 일정 기간 동안 사용하는 계약이다.'},

  {en:'CY (Container Yard)', ko:'CY', vi:'컨테이너를 인도·인수 및 보관하기 위해 지정된 장소이다.'},
  {en:'CFS (Container Freight Station)', ko:'CFS', vi:'여러 화주의 화물이 하나의 컨테이너에 혼적·분류되는 장소이며, CFS에서 혼적된 컨테이너는 CY로 반입된다.'},
  {en:'FCL (Full Container Load)', ko:'FCL', vi:'하나의 컨테이너에 단일 화주의 화물이 적입되며, 화주의 공장 또는 창고에서 적입되어 CY로 반입된다.'},
  {en:'LCL (Less than Container Load)', ko:'LCL', vi:'하나의 컨테이너에 여러 화주의 화물을 혼적하여 적입되며, CFS에서 혼적 후 CY로 반입된다.'},
  {en:'B/L (Bill of Lading)', ko:'선하증권', vi:'운송인과 송하인 간 해상운송계약의 증거서류로, 선박에 화물이 적재되었음을 기재하고 수령한 화물의 운송과 인도를 약속하는 유가증권이며 유통이 가능하다.'},
  {en:'shipped B/L', ko:'선적식 선하증권', vi:'운송인이 화물을 본선에 적재한 후 발행하는 선하증권이다.'},
  {en:'received B/L', ko:'수취식 선하증권', vi:'선적 대상 선박이 지정되어 있는 경우, 운송인이 화물을 수령한 후 선적 전에 발행하는 선하증권이다.'},
  {en:'straight B/L', ko:'기명식 선하증권', vi:'수하인의 이름과 주소가 기재된 선하증권으로, 제3자에게 양도할 수 없다.'},
  {en:'order B/L', ko:'지시식 선하증권', vi:'수하인이 특정되지 않고 지시인만 기재된 선하증권으로, 배서를 통해 양도가 가능하며 신용장 거래에서만 사용된다.'},
  {en:'clean B/L', ko:'무사고 선하증권', vi:'화물이 정상 상태로 적재되어 사고문언이 없는 깨끗한 상태로 발행되는 선하증권이다.'},
  {en:'switch B/L', ko:'스위치 선하증권', vi:'중계무역에서 원수출자를 공개하지 않기 위해 사용하는 선하증권이다.'},
  {en:'surrendered B/L', ko:'서렌더 선하증권', vi:'화물이 도착했으나 선하증권이 도착하지 않았을 때, 원본 없이도 화물을 인도받을 수 있게 하는 선하증권이다.'},
  {en:'freight', ko:'해상운임', vi:'해상 거래에서의 지불금액으로, 하역비 부담에 따라 B/T, FI, FO 조건이 있다.'},
  {en:'B/T (Berth Term)', ko:'B/T', vi:'선적비용과 양륙비용 모두 선주가 부담하며 정기선에서 이용되는 조건이다.'},
  {en:'FI (Free In)', ko:'FI', vi:'선적비용은 화주가 부담하고 양륙비용은 선주가 부담하는 조건이다.'},
  {en:'FO (Free Out)', ko:'FO', vi:'선적비용은 선주가 부담하고 양륙비용은 화주가 부담하는 조건이다.'},
  {en:'additional freight', ko:'할증운임', vi:'일정 중량 이상의 화물 적재 시 기본운임의 일정률을 할증하여 부과하는 운임이다.'},
  {en:'congestion surcharge', ko:'체선할증료', vi:'양륙항이 혼잡하여 하역에 시간이 걸릴 경우, 항구정박 손실을 보전하기 위한 할증료이다.'},
  {en:'detention charge', ko:'지체료', vi:'화주가 컨테이너·트레일러를 기일 내 반납하지 않을 경우 운송인에게 벌과금으로 지불하는 비용이다.'},
  {en:'demurrage charge', ko:'체화료', vi:'화주가 CY에서 정해진 기간을 초과하여 컨테이너를 반출할 경우, 지체된 기일에 비례하여 지불하는 비용이다.'},

  {en:'container multimodal transport', ko:'컨테이너 복합운송', vi:'송하인이 수하인에게 컨테이너를 운송하는 데 육·해·공 여러 운송수단이 결합되어 활용되는 방식이다.'},
  {en:'birdy-back', ko:'버디백', vi:'항공기에 컨테이너를 적재하여 운송하는 컨테이너 운송방식이다.'},
  {en:'fishy-back', ko:'피시백', vi:'선박에 컨테이너를 적재하여 운송하는 컨테이너 운송방식이다.'},
  {en:'piggy-back', ko:'피기백', vi:'트레일러에 적재한 컨테이너를 철도 화차에 실어 운송하는 컨테이너 운송방식이다.'},
  {en:'land bridge', ko:'랜드브리지', vi:'해상과 육상의 복합운송방식으로, 대륙 육로를 다리처럼 사용하여 해상과 해상을 연결하거나 해상과 육상을 연결하는 방식이다.'},
  {en:'SLB (Siberian Land Bridge)', ko:'SLB', vi:'러시아 극동까지는 선박으로, 그 이후 유럽까지는 철도·트럭 등을 이용하는 복합운송방식이다.'},
  {en:'MLB (Mini Land Bridge)', ko:'MLB', vi:'극동지역에서 미국 서해안 항구까지 해상운송 후, 미국 동부까지 철도운송하는 방식이다.'},
  {en:'ALB (American Land Bridge)', ko:'ALB', vi:'극동에서 미국 서부까지 해상, 다시 미국 동부까지 철도, 이어 유럽까지 해상으로 운송하는 방식이다.'},
  {en:'Sea & Air', ko:'Sea & Air', vi:'해상과 항공의 복합운송방식으로, 해상운송의 저비용과 항공운송의 신속성을 결합한 운송방식이다.'},
  {en:'commercial invoice', ko:'상업송장', vi:'물품의 주요 사항을 기재한 문서로, 수출자에게는 대금청구서, 수입자에게는 물품명세서 역할을 하며 과세가격의 증명자료가 된다.'},
  {en:'AWB (Air Waybill)', ko:'항공화물운송장', vi:'항공운송계약에서 사용되는 운송서류로, B/L과 달리 유가증권이 아닌 단순한 운송장으로 유통 불가하다.'},
  {en:'C/R (Courier Receipt)', ko:'특사수령증', vi:'FedEx, DHL 등 국제특송업체를 통한 서류·소량화물 특급운송에 사용되는 서류이다.'},
  {en:'insurance document', ko:'보험서류', vi:'운송 중 위험으로 화물에 손해가 발생할 가능성에 대비해 보험계약 후 발급받는 서류이다.'},
  {en:'insurance on goods', ko:'적하보험', vi:'해상운송 중 화물을 보험목적으로 하는 보험이다.'},
  {en:'hull insurance', ko:'선박보험', vi:'운송수단인 선박 자체를 보험목적으로 하는 보험이다.'},
  {en:'insurable value', ko:'보험가액', vi:'피보험이익의 금전적 평가액으로, 보험계약자가 보험에 가입할 수 있는 최고한도액이다.'},
  {en:'insured amount', ko:'보험금액', vi:'보험사고 발생 시 보험자가 피보험자에게 보상하는 최고한도액으로, 계약 시 보험가액 내에서 정한다.'},
  {en:'over insurance', ko:'초과보험', vi:'보험금액이 보험가액을 초과하는 경우의 보험이다.'},
  {en:'full insurance', ko:'전부보험', vi:'보험금액과 보험가액이 동일한 경우의 보험으로, 발생한 손해액 전부를 지급해야 한다.'},
  {en:'under insurance', ko:'일부보험', vi:'보험금액이 보험가액보다 적은 경우, 보험가입금액 비율에 따라 손해액을 비례보상한다.'},



      

   ];

let all = sample.slice();
saveAll();


    let view = all.slice();
    let idx = 0;
    let flipped = false;

    // Elements
    const card = $('#card');
    const frontWord = $('#front-word');
    const backMeaning = $('#back-meaning');
    const counter = $('#counter');
    const search = $('#search');
    const toggleKO = $('#toggle-ko');
    const toggleVI = $('#toggle-vi');

    function saveAll(){ localStorage.setItem(LS_KEY, JSON.stringify(all)); }
    function loadAll(){ return JSON.parse(localStorage.getItem(LS_KEY) || '[]'); }

    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; }
      return arr;
    }

    function render(){
      if(view.length===0){
        frontWord.textContent = 'Không có thẻ';
        backMeaning.innerHTML = '<span class="muted">Hãy thêm từ mới.</span>';
        $('#prev').disabled = $('#next').disabled = $('#flip').disabled = true;
        counter.textContent = '0 / 0';
        card.classList.remove('flipped');
        return;
      }
      $('#prev').disabled = $('#next').disabled = $('#flip').disabled = false;
      idx = (idx + view.length) % view.length;
      const c = view[idx];
      frontWord.textContent = c.en;
      const segs = [];
      if(toggleKO.checked && c.ko) segs.push(`<div><strong>KO</strong>: ${escapeHtml(c.ko)}</div>`);
      if(toggleVI.checked && c.vi) segs.push(`<div><strong>VI</strong>: ${escapeHtml(c.vi)}</div>`);
      backMeaning.innerHTML = segs.join('');
      counter.textContent = `${idx+1} / ${view.length}`;
      if(!flipped) card.classList.remove('flipped');
      else card.classList.add('flipped');

    }

    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[m])); }

    function applyFilter(){
      const q = search.value.trim().toLowerCase();
      view = all.filter(c=>{
        if(!q) return true;
        return [c.en,c.ko,c.vi].filter(Boolean).some(x=>x.toLowerCase().includes(q));
      });
      idx = 0; render();
    }

    // Events
    $('#flip').addEventListener('click', ()=>{ flipped=!flipped; card.classList.toggle('flipped', flipped); });
    card.addEventListener('click', ()=>{ flipped=!flipped; card.classList.toggle('flipped', flipped); });
    $('#next').addEventListener('click', ()=>{ idx++; flipped=false; render(); });
    $('#prev').addEventListener('click', ()=>{ idx--; flipped=false; render(); });

    document.addEventListener('keydown', (e)=>{
      if(e.key==='ArrowRight'){ e.preventDefault(); $('#next').click(); }
      if(e.key==='ArrowLeft'){ e.preventDefault(); $('#prev').click(); }
      if(e.key===' '){ e.preventDefault(); $('#flip').click(); }
      if(e.key==='Enter' && document.activeElement===search){ applyFilter(); }
    });

    search.addEventListener('input', ()=>{ applyFilter(); });
    $('#shuffle').addEventListener('click', ()=>{ view = shuffle(view); idx=0; flipped=false; render(); });
    toggleKO.addEventListener('change', render);
    toggleVI.addEventListener('change', render);

    // Add new card
    function addCard(en,ko,vi){
      if(!en){ alert('Vui lòng nhập English'); return; }
      all.push({en:en.trim(), ko:ko.trim(), vi:vi.trim()});
      saveAll();
      applyFilter();
      if(!search.value){ idx = all.length-1; }
      flipped=false; render();
    }

    $('#add').addEventListener('click', ()=>{
      const en=$('#in-en').value, ko=$('#in-ko').value, vi=$('#in-vi').value;
      addCard(en,ko,vi);
      $('#in-en').value = $('#in-ko').value = $('#in-vi').value = '';
      $('#in-en').focus();
    });
    ['#in-en','#in-ko','#in-vi'].forEach(sel=>$(sel).addEventListener('keydown',e=>{ if(e.key==='Enter'){ e.preventDefault(); $('#add').click(); }}));

    // Edit current
    $('#edit').addEventListener('click', ()=>{
      if(view.length===0) return;
      const curr = view[idx];
      const en = prompt('Sửa EN', curr.en); if(en===null) return;
      const ko = prompt('Sửa KO', curr.ko||'') ?? '';
      const vi = prompt('Sửa VI', curr.vi||'') ?? '';
      const masterIndex = all.findIndex(c=>c===curr || (c.en===curr.en && c.ko===curr.ko && c.vi===curr.vi));
      if(masterIndex>-1){ all[masterIndex] = {en:en.trim(), ko:ko.trim(), vi:vi.trim()}; saveAll(); applyFilter(); render(); }
    });

    // Delete current
    $('#del').addEventListener('click', ()=>{
      if(view.length===0) return;
      const curr = view[idx];
      if(!confirm(`Xoá thẻ: "${curr.en}"?`)) return;
      const masterIndex = all.findIndex(c=>c===curr || (c.en===curr.en && c.ko===curr.ko && c.vi===curr.vi));
      if(masterIndex>-1){ all.splice(masterIndex,1); saveAll(); applyFilter(); idx=0; flipped=false; render(); }
    });

    // Clear all
    $('#clear-all').addEventListener('click', ()=>{
      if(confirm('Xoá toàn bộ bộ thẻ?')){ all=[]; saveAll(); applyFilter(); render(); }
    });

    // Export JSON
    $('#btn-export').addEventListener('click', ()=>{
      const blob = new Blob([JSON.stringify(all,null,2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'flatcards_vocab.json';
      document.body.appendChild(a); a.click(); a.remove();
      setTimeout(()=>URL.revokeObjectURL(url), 500);
    });

    // Import JSON
    $('#file').addEventListener('change', async (e)=>{
      const file = e.target.files[0]; if(!file) return;
      try{
        const text = await file.text();
        const data = JSON.parse(text);
        if(!Array.isArray(data)) throw new Error('Định dạng JSON không hợp lệ');
        all = data.map(x=>({en:String(x.en||'').trim(), ko:String(x.ko||'').trim(), vi:String(x.vi||'').trim()})).filter(x=>x.en);
        saveAll(); search.value=''; view=all.slice(); idx=0; flipped=false; render();
      }catch(err){ alert('Không thể nhập JSON: '+ err.message); }
      e.target.value='';
    });

    // First render
    applyFilter(); render();
  })();
  </script>
</body>
</html>
